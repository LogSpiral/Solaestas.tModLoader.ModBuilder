<Project>
	<Import Condition="Exists('../../tModLoader.targets') And $(tMLPath) == ''"
		Project="../../tModLoader.targets" />
	<Import Condition="Exists('../../../tModLoader.targets') And $(tMLPath) == ''"
		Project="../../../tModLoader.targets" />
	<Import Condition="Exists('../../../../tModLoader.targets') And $(tMLPath) == ''"
		Project="../../../../tModLoader.targets" />

	<PropertyGroup>
		<!--消除架构警告-->
		<ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>None</ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>
		<!--复制包里面的程序集到输出目录-->
		<CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
		<!--相关路径-->
		<ModBuilderConfigPath>$(BaseIntermediateOutputPath)BuildConfig.json</ModBuilderConfigPath>
		<ModBuilderTaskPath>$(MSBuildThisFileDirectory)Solaestas.tModLoader.ModBuilder.dll</ModBuilderTaskPath>
		<ShaderBuilderDirectory>$(BaseIntermediateOutputPath)</ShaderBuilderDirectory>
		<!--附加功能开关-->
		<UseAssetPath>true</UseAssetPath>
		<UsePublicizer>true</UsePublicizer>
		<UseMinimalMod>false</UseMinimalMod>
		<NotMod>false</NotMod>
		<!--附加功能配置-->
		<ResourceStyle>blacklist</ResourceStyle>
		<AssetNamespace>$(RootNamespace)</AssetNamespace>
		<AssetClassName>ModAsset</AssetClassName>
		<PathStyle>plain</PathStyle>
		<WhitelistMod>HEROsMod;Cheatsheet;DragonLen</WhitelistMod>
	</PropertyGroup>

	<ItemGroup>
		<!--阻止tML程序集复制到输出目录-->
		<Reference Include="$(tMLLibraryPath)/**/*.dll" Private="false" />
		<Reference Include="$(tMLSteamPath)$(tMLPath)" Private="false" />
		<!--资源文件-->
		<EffectFile Include="**/*.fx" />
		<ImageFile Include="**/*.png" />
		<ImageFile Remove="icon.png" />
		<ImageFile Remove="workshop_icon*.png" />
		<AvailableItemName Include="EffectFile" />
		<AvailableItemName Include="ImageFile" />
	</ItemGroup>

	<ItemGroup Condition="$(UsePublicizer) == 'true'">
		<PackageReference Include="BepInEx.AssemblyPublicizer.MSBuild" Version="0.4.0"
			ExcludeAssets="runtime" />
		<Publicize Include="tModLoader" />
	</ItemGroup>

	<ItemGroup Condition="'$(UseAssetPath)' != ''">
		<!--VS会显示Visible为false的文件的所在文件夹，加一个Link修改显示位置-->
		<Compile Include="$(BaseIntermediateOutputPath)ModAsset.g.cs" Visible="false" AutoGen="true"
			Link="%(Filename)%(Extension)" />
	</ItemGroup>
</Project>